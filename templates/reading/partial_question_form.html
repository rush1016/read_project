<form 
    hx-post="{% url 'add_question' %}" 
    hx-trigger="click from:#submit-all"
    hx-swap="none">
    {{ question_formset.management_form }}

    <div class="row align-center">
        <div class="col-11 d-flex align-self-center">
            {{ question_formset }}
        </div>
        <div class="col-1 align-self-end">
            <button type="button" class="btn btn-danger remove-form-button" 
                hx-on="click: this.closest('form').remove()">
                    Remove Question
            </button>
        </div>
    </div>
    {{ choice_formset.management_form }}
    {% for choice in choice_formset %}
    <div class="row">
        <div class="col-11">
            {{ choice }}
        </div>
    </div>
    {% endfor %}
    <input type="hidden" name="passage_id" id="passage_instance_field" value="{{ passage_id }}">
</form>

<script>
    $(document).ready(function(){
        let formCount = $("#question-container form").length;

        $('.remove-form-button').click(function() {
            formCount = updateFormCount();
            console.log(formCount, "<", questionLimit);
            if (formCount < questionLimit) {
                
                saveButton.addClass('d-none')
            }
        })

        function updateFormCount() {
            formCount = $('#question-container form').length;

            return formCount;
        }

        $(document).on('htmx:afterRequest', function(event, xhr, elt) {
            if (xhr.status === 200) {
                
            }
        })
    });
</script>